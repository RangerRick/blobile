!function(){"use strict";function n(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function e(n,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}(self.webpackChunkblobile=self.webpackChunkblobile||[]).push([[2254],{82254:function(i,o,t){t.r(o),t.d(o,{StandingsPageModule:function(){return A}});var r=t(95861),s=t(54364),a=t(90335),c=t(31289),u=t(3786),d=t(54709),l=t(29543),m=t(60535),g=t(57711),f=t(90195),p=t(64106),h=t(30748),v=t(1095);function Z(n,e){1&n&&(p.TgZ(0,"ion-button"),p._UZ(1,"ion-spinner"),p.qZA())}function w(n,e){if(1&n){var i=p.EpF();p.TgZ(0,"ion-row",18),p.NdJ("click",function(){var n=p.CHM(i).$implicit;return p.oxw(3).openTeam(n.id)}),p.TgZ(1,"ion-col",19),p._uU(2),p.qZA(),p.TgZ(3,"ion-col",20),p._uU(4),p.qZA(),p.TgZ(5,"ion-col",21),p._uU(6),p.qZA(),p.qZA()}if(2&n){var o=e.$implicit;p.Akn("background-color: "+o.mainColor+"; color: "+o.mainTextColor),p.xp6(2),p.hij(" ",o.name," "),p.xp6(2),p.hij(" ",o.wins," "),p.xp6(2),p.AsE(" ",o.nonLosses,"-",o.losses," ")}}function b(n,e){if(1&n&&(p.TgZ(0,"ion-card",9),p.TgZ(1,"ion-card-header",10),p.TgZ(2,"ion-card-subtitle"),p._uU(3),p.qZA(),p.qZA(),p.TgZ(4,"ion-card-content",11),p.TgZ(5,"ion-grid",12),p.TgZ(6,"ion-row",13),p.TgZ(7,"ion-col",14),p._uU(8," Teams "),p.qZA(),p.TgZ(9,"ion-col",15),p._uU(10," Wins "),p.qZA(),p.TgZ(11,"ion-col",16),p._uU(12," Record "),p.qZA(),p.qZA(),p.YNc(13,w,7,6,"ion-row",17),p.qZA(),p.qZA(),p.qZA()),2&n){var i=e.$implicit,o=p.oxw(2);p.xp6(3),p.Oqu(i.name),p.xp6(10),p.Q6J("ngForOf",i.teams)("ngForTrackBy",o.id)}}function x(n,e){if(1&n&&(p.TgZ(0,"ion-col",6),p.TgZ(1,"ion-header",7),p.TgZ(2,"h4"),p._uU(3),p.qZA(),p.qZA(),p.YNc(4,b,14,3,"ion-card",8),p.qZA()),2&n){var i=e.$implicit,o=p.oxw();p.xp6(3),p.Oqu(i.name),p.xp6(1),p.Q6J("ngForOf",i.divisions)("ngForTrackBy",o.id)}}var T,k=[{path:"",component:(T=function(){function i(e,o,t,r){n(this,i),this.database=e,this.modalController=o,this.platform=t,this.stream=r,this.loading=!0,this.leagues=new m.M({}),this.standings=new l.U({}),this.tiebreakers=new g.w({}),this.data={subleagues:[]}}var o,t,r;return o=i,(t=[{key:"ngOnInit",value:function(){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var e=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.platform.ready();case 2:this.stream.subscribe(function(n){return(0,u.mG)(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n instanceof d.m&&(this.leagues=n.leagues,this.standings=n.games.standings),this.postprocess();case 1:case"end":return e.stop()}},e,this)}))});case 3:case"end":return n.stop()}},n,this)}))}},{key:"openTeam",value:function(n){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.debug("opening team: ".concat(n)),e.next=3,this.modalController.create({component:f.u,componentProps:{id:n}});case 3:return e.next=5,e.sent.present();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}))}},{key:"postprocess",value:function(){var n,e,i;return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function o(){var t,r,s,a,c,u=this;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(t=null===(n=this.leagues)||void 0===n?void 0:n.leagues[0]){o.next=3;break}return o.abrupt("return");case 3:return this.data.name=t.name,r=function(n,e){var i=u.standings.wins[e.id]-u.standings.wins[n.id];return 0===i&&(i=u.tiebreakers.order.indexOf(n.id)-u.tiebreakers.order.indexOf(e.id)),i},s=this.standings.records,this.tiebreakers=this.leagues.tiebreakers.find(function(n){return n.id===t.tiebreakers}),o.next=8,this.database.teams();case 8:a=o.sent,c=null===(i=null===(e=this.leagues)||void 0===e?void 0:e.subleagues)||void 0===i?void 0:i.filter(function(n){return t.subleagues.indexOf(n.id)>=0}),this.data.subleagues=c.map(function(n){var e,i,o={id:n.id,name:n.name},t=[],c=null===(i=null===(e=u.leagues)||void 0===e?void 0:e.divisions)||void 0===i?void 0:i.filter(function(e){return n.divisions.indexOf(e.id)>=0});return o.divisions=c.sort(function(n,e){return n.name<e.name?-1:n.name>e.name?1:0}).map(function(n){var e={id:n.id,name:n.name};return e.teams=n.teams.map(function(n){return a.find(function(e){return n===e.id})}).sort(r).map(function(n){var e=s[n.id],i={id:n.id,name:n.fullName,emoji:n.emoji,emojiColor:n.emojiColor,mainColor:n.mainColor,secondaryColor:n.secondaryColor,mainTextColor:n.contrastingMainColor,secondaryTextColor:n.contrastingSecondaryColor,wins:e.wins,losses:e.losses,nonLosses:e.nonLosses,playoffs:!1};return t.push(i),i}),e}),t.sort(function(n,e){var i=e.wins-n.wins;return 0===i&&(i=u.tiebreakers.order.indexOf(n.id)-u.tiebreakers.order.indexOf(e.id)),i}).filter(function(n,e){return e<4}).map(function(n){n.playoffs=!0}),o}),this.loading=!1;case 11:case"end":return o.stop()}},o,this)}))}},{key:"id",value:function(n){return n&&n.id?n.id:n}}])&&e(o.prototype,t),r&&e(o,r),i}(),T.\u0275fac=function(n){return new(n||T)(p.Y36(h.k),p.Y36(r.IN),p.Y36(r.t4),p.Y36(v.H))},T.\u0275cmp=p.Xpm({type:T,selectors:[["app-standings"]],decls:10,vars:4,consts:[[3,"translucent"],["color","primary"],["slot","secondary"],[4,"ngIf"],[1,"ion-no-margin"],["size","6","size-xs","12","size-sm","12","size-md","6","size-lg","6","size-xl","6",4,"ngFor","ngForOf","ngForTrackBy"],["size","6","size-xs","12","size-sm","12","size-md","6","size-lg","6","size-xl","6"],[1,"ion-no-border","ion-text-center"],["class","ion-no-padding ion-no-margin ion-margin-vertical",4,"ngFor","ngForOf","ngForTrackBy"],[1,"ion-no-padding","ion-no-margin","ion-margin-vertical"],[1,"division-header"],[1,"ion-no-padding"],[2,"width","100%"],["lines","none",1,"header-row"],["size","7",1,"team-name","header"],["size","2",1,"team-wins","header"],["size","3",1,"team-record","header"],["lines","none","class","team-row",3,"style","click",4,"ngFor","ngForOf","ngForTrackBy"],["lines","none",1,"team-row",3,"click"],["size","7",1,"team-name"],["size","2",1,"team-wins"],["size","3",1,"team-record"]],template:function(n,e){1&n&&(p.TgZ(0,"ion-header",0),p.TgZ(1,"ion-toolbar",1),p.TgZ(2,"ion-title"),p._uU(3," Standings "),p.qZA(),p.TgZ(4,"ion-buttons",2),p.YNc(5,Z,2,0,"ion-button",3),p.qZA(),p.qZA(),p.qZA(),p.TgZ(6,"ion-content",4),p.TgZ(7,"ion-grid"),p.TgZ(8,"ion-row"),p.YNc(9,x,5,3,"ion-col",5),p.qZA(),p.qZA(),p.qZA()),2&n&&(p.Q6J("translucent",!0),p.xp6(5),p.Q6J("ngIf",e.loading),p.xp6(4),p.Q6J("ngForOf",e.data.subleagues)("ngForTrackBy",e.id))},directives:[r.Gu,r.sr,r.wd,r.Sm,s.O5,r.W2,r.jY,r.Nd,s.sg,r.YG,r.PQ,r.wI,r.PM,r.Zi,r.tO,r.FN],styles:[".team-row[_ngcontent-%COMP%]{font-weight:bold}.team-wins[_ngcontent-%COMP%]{text-align:end;font-family:monospace;font-size:1rem}.team-record[_ngcontent-%COMP%]{text-align:end;font-family:monospace;font-size:1rem}.division-header[_ngcontent-%COMP%]{padding-bottom:.5rem}.division-header[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{color:#000;font-size:larger}.header[_ngcontent-%COMP%]{font-size:smaller;font-family:inherit!important;color:#000}"]}),T)}],y=function(){var e=function e(){n(this,e)};return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[c.Bz.forChild(k)],c.Bz]}),e}(),A=function(){var e=function e(){n(this,e)};return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[r.Pc,s.ez,a.u5,y]]}),e}()}}])}();
//# sourceMappingURL=2254-es5.7a2fbb1742b5939fd880.js.map