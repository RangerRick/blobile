{"version":3,"sources":["webpack:///src/app/matchups/matchups.page.html","webpack:///src/app/matchups/matchups-routing.module.ts","webpack:///src/app/matchups/matchups.page.ts","webpack:///src/app/matchups/matchups.module.ts"],"names":["routes","path","component","MatchupsPage","database","modalController","platform","stream","loading","teams","this","ready","subscribe","evt","streamData","postprocess","id","console","debug","modal","create","componentProps","present","matchup","type","team","mainColor","contrastingMainColor","brackets","postseason","games","postseasons","even","odd","rows","Math","floor","matchups","length","i","push","name","playoffs","evenMatchups","oddMatchups","leagues","item","MatchupsPageRoutingModule","MatchupsPageModule"],"mappings":"ySAMM,sBACE,uBACF,S,yBAOF,yBAEE,cAAI,SAAgB,QACtB,S,+BADM,wB,yBAqBQ,sBACE,kBACE,SACF,QACF,S,0CAHoB,qCAChB,oC,yBAIN,mBACE,sBACE,kBACE,SACF,QACF,QACA,sBACE,kBACE,mBAAoB,SAAiC,QACrD,mBAAmB,SAAoC,QACzD,QACF,QACA,uBACE,mBACE,UACF,QACF,QACF,S,0CAfsB,qCAChB,mCAIgB,qCACI,0CACD,6CAIH,qCAChB,oC,sBAIN,mBACE,sBACE,kBACE,gBAAM,sBAAU,QAClB,QACF,QACF,S,yBA7CN,uBACE,+BACE,uBACE,mBACE,sBACE,kBACE,SACF,QACF,QACA,sBACE,kBACE,mBAAoB,UAAiC,QACrD,oBAAmB,UAAoC,QACzD,QACF,QACA,6BAKF,QACA,8BAkBA,4BAOF,QACF,QACF,S,oCA3C4B,qCAChB,mCAIgB,qCACI,0CACD,6CAGuE,iCAMtF,iCAkBA,iC,yBA2BR,sBACE,kBACE,SACF,QACF,S,0CAHoB,qCAChB,oC,yBAIN,mBACE,sBACE,kBACE,SACF,QACF,QACA,sBACE,kBACE,mBAAoB,SAAiC,QACrD,mBAAmB,SAAoC,QACzD,QACF,QACA,uBACE,mBACE,UACF,QACF,QACF,S,0CAfsB,qCAChB,mCAIgB,qCACI,0CACD,6CAIH,qCAChB,oC,sBAIN,mBACE,sBACE,kBACE,gBAAM,sBAAU,QAClB,QACF,QACF,S,yBA7CN,uBACE,+BACE,uBACE,mBACE,sBACE,kBACE,SACF,QACF,QACA,sBACE,kBACE,mBAAoB,UAAiC,QACrD,oBAAmB,UAAoC,QACzD,QACF,QACA,6BAKF,QACA,8BAkBA,4BAOF,QACF,QACF,S,oCA3C4B,qCAChB,mCAIgB,qCACI,0CACD,6CAGuE,iCAMtF,iCAkBA,iC,yBAnGxB,gBACE,8BAKA,oBACE,mBACE,qBACE,8BAiDF,QACA,qBACE,8BAiDF,QACF,QACF,QA+BF,S,oCA5IK,8BAOiC,wCAAwB,qBAmDxB,yCAAyB,sB,yBA7DjE,yBACE,wBA+IF,S,qBA/I4B,sCCV5B,MAAMA,EAAiB,CACrB,CACEC,KAAM,GACNC,UCcJ,MAAM,MAAOC,EAMX,YACUC,EACAC,EACAC,EACAC,GAHA,KAAAH,WACA,KAAAC,kBACA,KAAAC,WACA,KAAAC,SATV,KAAAC,SAAU,EAGV,KAAAC,MAAQ,GAUF,W,oDACEC,KAAKJ,SAASK,QACpBD,KAAKH,OAAOK,UAAiBC,IAAyB,uCAChDA,aAAe,MACjBH,KAAKI,WAAaD,GAEpBH,KAAKK,mBAIH,SAASC,G,8CACbC,QAAQC,MAAM,iBAAiBF,KAC/B,MAAMG,QAAcT,KAAKL,gBAAgBe,OAAO,CAC9ClB,UAAW,IACXmB,eAAgB,CACdL,QAGJ,aAAaG,EAAMG,YAGrB,SAASC,EAAkBC,GACzB,MACMC,EAAOf,KAAKD,MADFc,EAAQ,GAAGC,UAI3B,MAAO,qBAFYC,EAAKC,qBACLD,EAAKE,wBAIpB,c,8CACJjB,KAAKkB,SAAW,GAEhB,IAAK,IAAIC,KAAcnB,KAAKI,WAAWgB,MAAMC,YAAa,CACxD,MAAMC,EAAO,GACPC,EAAM,GAENC,EAAOC,KAAKC,MAAMP,EAAWQ,SAASC,OAAS,GACrD,IAAK,IAAIC,EAAE,EAAGA,EAAIV,EAAWQ,SAASC,OAAQC,IACxCA,EAAIL,EACND,EAAIO,KAAKX,EAAWQ,SAASE,IAE7BP,EAAKQ,KAAKX,EAAWQ,SAASE,IAIlC7B,KAAKkB,SAASY,KAAK,CACjBC,KAAMZ,EAAWa,SAASD,KAC1BE,aAAcX,EACdY,YAAaX,IAIjB,IAAK,MAAMR,KAAQf,KAAKI,WAAW+B,QAAQpC,MACzCC,KAAKD,MAAMgB,EAAKT,IAAMS,EASxBf,KAAKF,SAAU,IAGjB,GAAGsC,GACD,OAAIA,GAAQA,EAAK9B,GACR8B,EAAK9B,GAEP8B,GAnFX,O,sCAAa3C,GAAY,gD,wBAAZA,EAAY,ygCFrBzB,wBACE,yBACE,qBACE,sBACF,QACA,yBACE,8BAGF,QACF,QACF,QAEA,gC,MAbY,wBAMO,iCAOgC,kD,yjBEQtCA,GAAb,KDNO,IAAM4C,EAAb,MAAM,MAAOA,GAAb,O,sCAAaA,I,wBAAAA,I,4BAHF,CAAC,cAAsB/C,IACtB,QAEC+C,GAAb,G,eEIO,IAAMC,EAAb,MAAM,MAAOA,GAAb,O,sCAAaA,I,wBAAAA,I,4BATF,CACP,KACA,KACA,KACA,IACAD,MAISC,GAAb","file":"x","sourcesContent":["<ion-header [translucent]=\"true\">\n  <ion-toolbar color=\"primary\">\n    <ion-title>\n      Matchups\n    </ion-title>\n    <ion-buttons slot=\"secondary\">\n      <ion-button *ngIf=\"loading\">\n        <ion-spinner></ion-spinner>\n      </ion-button>\n    </ion-buttons>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content class=\"ion-no-margin ion-no-padding\" *ngIf=\"!loading && streamData\">\n  <span *ngFor=\"let bracket of brackets\">\n    <ion-header class=\"ion-no-border ion-text-center\"\n      *ngIf=\"bracket.name\">\n      <h4>{{bracket.name}}</h4>\n    </ion-header>\n\n    <ion-grid>\n      <ion-row>\n        <ion-col size=\"12\" size-sm=\"12\" size-md=\"6\" size-lg=\"6\" size-xl=\"6\" class=\"ion-no-padding ion-no-margin\">\n          <ion-card *ngFor=\"let matchup of bracket.oddMatchups; trackBy: id\" class=\"ion-margin-vertical\">\n            <ion-card-content class=\"ion-no-padding ion-no-margin\">\n              <ion-grid class=\"ion-no-padding ion-no-margin\">\n                <ion-row>\n                  <ion-col size=\"2\" class=\"ion-text-end ion-align-items-center ion-no-margin ion-no-padding\">\n                    <div class=\"seed\" [style]=\"getStyle(matchup, 'home')\">\n                      {{matchup.homeSeed}}\n                    </div>\n                  </ion-col>\n                  <ion-col class=\"ion-text-start ion-align-items-center ion-no-margin ion-no-padding\">\n                    <div class=\"team\" [style]=\"getStyle(matchup, 'home')\">\n                      <span class=\"emoji\">{{teams[matchup.homeTeam].emoji}}</span>\n                      <span class=\"name\">{{teams[matchup.homeTeam].fullName}}</span>\n                    </div>\n                  </ion-col>\n                  <ion-col size=\"1\" class=\"ion-text-start ion-align-items-center ion-no-margin ion-no-padding\" *ngIf=\"!matchup.idling\">\n                    <div class=\"wins\" [style]=\"getStyle(matchup, 'home')\">\n                      {{matchup.homeWins}}\n                    </div>\n                  </ion-col>\n                </ion-row>\n                <ion-row *ngIf=\"!matchup.idling\">\n                  <ion-col size=\"2\" class=\"ion-text-end ion-align-items-center ion-no-margin ion-no-padding\">\n                    <div class=\"seed\" [style]=\"getStyle(matchup, 'away')\">\n                      {{matchup.awaySeed}}\n                    </div>\n                  </ion-col>\n                  <ion-col class=\"ion-text-start ion-align-items-center ion-no-margin ion-no-padding\">\n                    <div class=\"team\" [style]=\"getStyle(matchup, 'away')\">\n                      <span class=\"emoji\">{{teams[matchup.awayTeam].emoji}}</span>\n                      <span class=\"name\">{{teams[matchup.awayTeam].fullName}}</span>\n                    </div>\n                  </ion-col>\n                  <ion-col size=\"1\" class=\"ion-text-start ion-align-items-center ion-no-margin ion-no-padding\">\n                    <div class=\"wins\" [style]=\"getStyle(matchup, 'away')\">\n                      {{matchup.awayWins}}\n                    </div>\n                  </ion-col>\n                </ion-row>\n                <ion-row *ngIf=\"matchup.idling\">\n                  <ion-col class=\"ion-text-center\">\n                    <div class=\"idling\">\n                      <span>idling ...</span>\n                    </div>\n                  </ion-col>\n                </ion-row>\n              </ion-grid>\n            </ion-card-content>\n          </ion-card>\n        </ion-col>\n        <ion-col size=\"12\" size-sm=\"12\" size-md=\"6\" size-lg=\"6\" size-xl=\"6\" class=\"ion-no-padding ion-no-margin\">\n          <ion-card *ngFor=\"let matchup of bracket.evenMatchups; trackBy: id\" class=\"ion-margin-vertical\">\n            <ion-card-content class=\"ion-no-padding ion-no-margin\">\n              <ion-grid class=\"ion-no-padding ion-no-margin\">\n                <ion-row>\n                  <ion-col size=\"2\" class=\"ion-text-end ion-align-items-center ion-no-margin ion-no-padding\">\n                    <div class=\"seed\" [style]=\"getStyle(matchup, 'home')\">\n                      {{matchup.homeSeed}}\n                    </div>\n                  </ion-col>\n                  <ion-col class=\"ion-text-start ion-align-items-center ion-no-margin ion-no-padding\">\n                    <div class=\"team\" [style]=\"getStyle(matchup, 'home')\">\n                      <span class=\"emoji\">{{teams[matchup.homeTeam].emoji}}</span>\n                      <span class=\"name\">{{teams[matchup.homeTeam].fullName}}</span>\n                    </div>\n                  </ion-col>\n                  <ion-col size=\"1\" class=\"ion-text-start ion-align-items-center ion-no-margin ion-no-padding\" *ngIf=\"!matchup.idling\">\n                    <div class=\"wins\" [style]=\"getStyle(matchup, 'home')\">\n                      {{matchup.homeWins}}\n                    </div>\n                  </ion-col>\n                </ion-row>\n                <ion-row *ngIf=\"!matchup.idling\">\n                  <ion-col size=\"2\" class=\"ion-text-end ion-align-items-center ion-no-margin ion-no-padding\">\n                    <div class=\"seed\" [style]=\"getStyle(matchup, 'away')\">\n                      {{matchup.awaySeed}}\n                    </div>\n                  </ion-col>\n                  <ion-col class=\"ion-text-start ion-align-items-center ion-no-margin ion-no-padding\">\n                    <div class=\"team\" [style]=\"getStyle(matchup, 'away')\">\n                      <span class=\"emoji\">{{teams[matchup.awayTeam].emoji}}</span>\n                      <span class=\"name\">{{teams[matchup.awayTeam].fullName}}</span>\n                    </div>\n                  </ion-col>\n                  <ion-col size=\"1\" class=\"ion-text-start ion-align-items-center ion-no-margin ion-no-padding\">\n                    <div class=\"wins\" [style]=\"getStyle(matchup, 'away')\">\n                      {{matchup.awayWins}}\n                    </div>\n                  </ion-col>\n                </ion-row>\n                <ion-row *ngIf=\"matchup.idling\">\n                  <ion-col class=\"ion-text-center\">\n                    <div class=\"idling\">\n                      <span>idling ...</span>\n                    </div>\n                  </ion-col>\n                </ion-row>\n              </ion-grid>\n            </ion-card-content>\n          </ion-card>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n    <!--\n    <ion-grid>\n      <ion-row>\n        <ion-col *ngFor=\"let subleague of data.subleagues; trackBy: id\">\n          <ion-header class=\"ion-no-border ion-text-center\">\n            <h4>{{subleague.name}}</h4>\n          </ion-header>\n          <ion-card class=\"ion-no-padding ion-no-margin ion-margin-vertical\" *ngFor=\"let division of subleague.divisions; trackBy: id\">\n            <ion-card-header>\n              <ion-card-subtitle>{{division.name}}</ion-card-subtitle>\n            </ion-card-header>\n            <ion-card-content class=\"ion-no-padding\">\n              <ion-item\n                lines=\"none\"\n                class=\"team-row\"\n                [style]=\"'--background: ' + team.mainColor + '; --color: ' + team.mainTextColor\"\n                *ngFor=\"let team of division.teams; trackBy: id\"\n                (click)=\"openTeam(team.id)\"\n              >\n                <ion-label class=\"team-name\">{{team.name}}</ion-label>\n                <ion-note class=\"team-wins\" slot=\"end\" [style]=\"'--color: ' + team.mainTextColor\">\n                  {{team.wins}}-{{team.losses}}\n              </ion-note>\n              </ion-item>\n            </ion-card-content>\n          </ion-card>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n    -->\n  </span>\n</ion-content>\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { MatchupsPage as MatchupsPage } from './matchups.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MatchupsPage,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class MatchupsPageRoutingModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ModalController, Platform } from '@ionic/angular';\n\nimport { APIStream } from 'src/lib/api/stream';\nimport { StreamData } from 'src/lib/model/streamData';\nimport { Team } from 'src/lib/model/team';\nimport { APIDatabase } from 'src/lib/api/database';\nimport { TeamPage } from '../team-page/team-page.page';\nimport { Matchup } from 'src/lib/model/matchup';\n\ninterface Brackets {\n  name: string;\n  evenMatchups: Matchup[];\n  oddMatchups: Matchup[];\n}\n\n@Component({\n  selector: 'app-matchups',\n  templateUrl: 'matchups.page.html',\n  styleUrls: ['matchups.page.scss']\n})\nexport class MatchupsPage implements OnInit {\n  loading = true;\n  streamData: StreamData;\n  brackets: Brackets[];\n  teams = {} as { [key: string]: Team };\n\n  constructor(\n    private database: APIDatabase,\n    private modalController: ModalController,\n    private platform: Platform,\n    private stream: APIStream,\n  ) {\n  }\n\n  async ngOnInit(): Promise<void> {\n    await this.platform.ready();\n    this.stream.subscribe(async (evt: StreamData|Event) => {\n      if (evt instanceof StreamData) {\n        this.streamData = evt;\n      }\n      this.postprocess();\n    });\n  }\n\n  async openTeam(id: string) {\n    console.debug(`opening team: ${id}`);\n    const modal = await this.modalController.create({\n      component: TeamPage,\n      componentProps: {\n        id,\n      },\n    });\n    return await modal.present();\n  }\n\n  getStyle(matchup: Matchup, type: string) {\n    const teamId  = matchup[`${type}Team`];\n    const team = this.teams[teamId];\n    const background = team.mainColor;\n    const foreground = team.contrastingMainColor;\n    return `background-color: ${background}; color: ${foreground};`;\n  }\n\n  async postprocess() {\n    this.brackets = [];\n\n    for (let postseason of this.streamData.games.postseasons) {\n      const even = [];\n      const odd = [];\n\n      const rows = Math.floor(postseason.matchups.length / 2);\n      for (let i=0; i < postseason.matchups.length; i++) {\n        if (i < rows) {\n          odd.push(postseason.matchups[i]);\n        } else {\n          even.push(postseason.matchups[i]);\n        }\n      }\n\n      this.brackets.push({\n        name: postseason.playoffs.name,\n        evenMatchups: even,\n        oddMatchups: odd,\n      });\n    }\n\n    for (const team of this.streamData.leagues.teams) {\n      this.teams[team.id] = team;\n    }\n\n    /*\n    console.debug('MatchupsPage.postprocess(): even=', this.evenMatchups);\n    console.debug('MatchupsPage.postprocess(): odd=', this.oddMatchups);\n    console.debug('MatchupsPage.postprocess(): teams=', this.teams);\n    */\n\n    this.loading = false;\n  }\n\n  id(item: any) {\n    if (item && item.id) {\n      return item.id;\n    }\n    return item;\n  }\n}\n","import { IonicModule } from '@ionic/angular';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { MatchupsPage as MatchupsPage } from './matchups.page';\n\nimport { MatchupsPageRoutingModule } from './matchups-routing.module';\nimport { TeamComponentModule } from '../team/team.module';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    TeamComponentModule,\n    MatchupsPageRoutingModule\n  ],\n  declarations: [MatchupsPage]\n})\nexport class MatchupsPageModule {}\n"]}