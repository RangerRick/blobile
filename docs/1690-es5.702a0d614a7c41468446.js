!function(){"use strict";function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t){return(n=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,t)}function t(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var t,u=o(e);if(n){var c=o(this).constructor;t=Reflect.construct(u,arguments,c)}else t=u.apply(this,arguments);return r(this,t)}}function r(e,n){if(n&&("object"==typeof n||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(self.webpackChunkblobile=self.webpackChunkblobile||[]).push([[1690],{51690:function(r,o,u){u.r(o),u.d(o,{EventSource:function(){return l},EventSourceWeb:function(){return f}});var c,i=u(19369),s=u(41899),a=((c=a||(a={}))[c.CONNECTING=0]="CONNECTING",c[c.OPEN=1]="OPEN",c[c.CLOSED=2]="CLOSED",a),f=function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(f,r);var o,u,c,s=t(f);function f(){var e;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,f),(e=s.call(this,{name:"EventSource",platforms:["web"]})).opened=!1,e}return o=f,(u=[{key:"configure",value:function(e){var n=this;return(0,i.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.debug("EventSourceWeb.configure(".concat(e.url,")")),e.url){t.next=2;break}throw new Error("url is required");case 2:n.url=e.url;case 3:case"end":return t.stop()}},t)}))()}},{key:"open",value:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(console.debug("EventSourceWeb.open()"),e.url){n.next=2;break}throw new Error("You must call configure first!");case 2:e.notifyListeners("readyStateChanged",{state:a.CONNECTING}),e.eventSource=new window.EventSource(e.url),e.eventSource.onopen=e.onOpen.bind(e),e.eventSource.onmessage=e.onMessage.bind(e),e.eventSource.onerror=e.onError.bind(e);case 3:case"end":return n.stop()}},n)}))()}},{key:"onError",value:function(e){this.notifyListeners("error",{error:null==e?void 0:e.message})}},{key:"onMessage",value:function(e){this.opened&&this.notifyListeners("message",{message:null==e?void 0:e.data})}},{key:"onOpen",value:function(e){this.opened=!0,this.notifyListeners("open",{message:null==e?void 0:e.message}),this.notifyListeners("readyStateChanged",{state:a.OPEN})}},{key:"close",value:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:console.debug("EventSourceWeb.close()"),e.opened=!1,e.eventSource&&(e.eventSource.close(),e.eventSource.onopen=null,e.eventSource.onmessage=null,e.eventSource.onerror=null,e.eventSource=null,e.notifyListeners("readyStateChanged",{state:a.CLOSED}));case 1:case"end":return n.stop()}},n)}))()}}])&&e(o.prototype,u),c&&e(o,c),f}(s.Uw),l=new f;(0,s.fK)(l)}}])}();
//# sourceMappingURL=1690-es5.702a0d614a7c41468446.js.map