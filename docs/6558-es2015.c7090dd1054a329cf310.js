"use strict";(self.webpackChunkblobile=self.webpackChunkblobile||[]).push([[6558],{76558:function(t,e,n){n.r(e),n.d(e,{HttpWeb:function(){return g}});var r=n(19369),o=n(41899);const i=function(){var t=(0,r.Z)(function*(t){return new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const t=r.result,n=t.substr(t.indexOf(",")+1);e(n)},r.onerror=t=>n(t),r.readAsDataURL(t)})});return function(e){return t.apply(this,arguments)}}(),s=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),c=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent),u=()=>{const t=[],e={};if(!document.cookie)return t;const n=document.cookie.split(";")||[];for(const o of n){let[t,n]=o.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");t=c(t).trim(),n=c(n).trim(),e[t]=n}const r=Object.entries(e);for(const[o,i]of r)t.push({key:o,value:i});return t},a=()=>{const t=document.cookie.split(";")||[];for(const e of t)document.cookie=e.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)},l=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),r=((t={})=>{const e=Object.keys(t);return Object.keys(t).map(t=>t.toLocaleLowerCase()).reduce((n,r,o)=>(n[r]=t[e[o]],n),{})})(t.headers)["content-type"]||"";if("string"==typeof t.data)n.body=t.data;else if(r.includes("application/x-www-form-urlencoded")){const e=new URLSearchParams;for(const[n,r]of Object.entries(t.data||{}))e.set(n,r);n.body=e.toString()}else if(r.includes("multipart/form-data")){const e=new FormData;if(t.data instanceof FormData)t.data.forEach((t,n)=>{e.append(n,t)});else for(let n of Object.keys(t.data))e.append(n,t.data[n]);n.body=e;const r=new Headers(n.headers);r.delete("content-type"),n.headers=r}else(r.includes("application/json")||"object"==typeof t.data)&&(n.body=JSON.stringify(t.data));return n},f=function(){var t=(0,r.Z)(function*(t){const e=l(t,t.webFetchExtra),n=((t,e=!0)=>t?Object.entries(t).reduce((t,n)=>{const[r,o]=n;let i,s;return Array.isArray(o)?(s="",o.forEach(t=>{i=e?encodeURIComponent(t):t,s+=`${r}=${i}&`}),s.slice(0,-1)):(i=e?encodeURIComponent(o):o,s=`${r}=${i}`),`${t}&${s}`},"").substr(1):null)(t.params,t.shouldEncodeUrlParams),r=n?`${t.url}?${n}`:t.url,o=yield fetch(r,e),s=o.headers.get("content-type")||"";let c,{responseType:u="text"}=o.ok?t:{};switch(s.includes("application/json")&&(u="json"),u){case"arraybuffer":case"blob":const t=yield o.blob();c=yield i(t);break;case"json":c=yield o.json();break;case"document":case"text":default:c=yield o.text()}const a={};return o.headers.forEach((t,e)=>{a[e]=t}),{data:c,headers:a,status:o.status,url:o.url}});return function(e){return t.apply(this,arguments)}}(),p=function(){var t=(0,r.Z)(function*(t){return f(Object.assign(Object.assign({},t),{method:"GET"}))});return function(e){return t.apply(this,arguments)}}(),d=function(){var t=(0,r.Z)(function*(t){return f(Object.assign(Object.assign({},t),{method:"POST"}))});return function(e){return t.apply(this,arguments)}}(),h=function(){var t=(0,r.Z)(function*(t){return f(Object.assign(Object.assign({},t),{method:"PUT"}))});return function(e){return t.apply(this,arguments)}}(),y=function(){var t=(0,r.Z)(function*(t){return f(Object.assign(Object.assign({},t),{method:"PATCH"}))});return function(e){return t.apply(this,arguments)}}(),b=function(){var t=(0,r.Z)(function*(t){return f(Object.assign(Object.assign({},t),{method:"DELETE"}))});return function(e){return t.apply(this,arguments)}}();class g extends o.Uw{constructor(){var t;super(),t=this,this.request=function(){var t=(0,r.Z)(function*(t){return f(t)});return function(e){return t.apply(this,arguments)}}(),this.get=function(){var t=(0,r.Z)(function*(t){return p(t)});return function(e){return t.apply(this,arguments)}}(),this.post=function(){var t=(0,r.Z)(function*(t){return d(t)});return function(e){return t.apply(this,arguments)}}(),this.put=function(){var t=(0,r.Z)(function*(t){return h(t)});return function(e){return t.apply(this,arguments)}}(),this.patch=function(){var t=(0,r.Z)(function*(t){return y(t)});return function(e){return t.apply(this,arguments)}}(),this.del=function(){var t=(0,r.Z)(function*(t){return b(t)});return function(e){return t.apply(this,arguments)}}(),this.getCookiesMap=function(){var t=(0,r.Z)(function*(t){const e=u(),n={};for(const r of e)n[r.key]=r.value;return n});return function(e){return t.apply(this,arguments)}}(),this.getCookies=function(){var t=(0,r.Z)(function*(t){return{cookies:u()}});return function(e){return t.apply(this,arguments)}}(),this.setCookie=function(){var t=(0,r.Z)(function*(t){const{key:e,value:n,expires:r="",path:o=""}=t;((t,e,n={})=>{const r=s(t),o=s(e),i=`; expires=${(n.expires||"").replace("expires=","")}`,c=(n.path||"/").replace("path=","");document.cookie=`${r}=${o||""}${i}; path=${c}`})(e,n,{expires:r,path:o})});return function(e){return t.apply(this,arguments)}}(),this.getCookie=function(){var t=(0,r.Z)(function*(t){return(t=>{const e=u();for(const n of e)if(n.key===t)return n;return{key:t,value:""}})(t.key)});return function(e){return t.apply(this,arguments)}}(),this.deleteCookie=function(){var t=(0,r.Z)(function*(t){document.cookie=`${t.key}=; Max-Age=0`});return function(e){return t.apply(this,arguments)}}(),this.clearCookies=function(){var t=(0,r.Z)(function*(t){return a()});return function(e){return t.apply(this,arguments)}}(),this.clearAllCookies=(0,r.Z)(function*(){return a()}),this.uploadFile=function(){var e=(0,r.Z)(function*(e){const n=new FormData;n.append(e.name,e.blob||"undefined");const r=Object.assign(Object.assign({},e),{body:n,method:"POST"});return t.post(r)});return function(t){return e.apply(this,arguments)}}(),this.downloadFile=function(){var e=(0,r.Z)(function*(e){const n=l(e,e.webFetchExtra),r=yield fetch(e.url,n);let o;if(null==e?void 0:e.progress)if(null==r?void 0:r.body){const n=r.body.getReader();let i=0,s=[];const c=r.headers.get("content-type"),u=parseInt(r.headers.get("content-length")||"0",10);for(;;){const{done:r,value:o}=yield n.read();if(r)break;s.push(o),i+=(null==o?void 0:o.length)||0,t.notifyListeners("progress",{type:"DOWNLOAD",url:e.url,bytes:i,contentLength:u})}let a=new Uint8Array(i),l=0;for(const t of s)void 0!==t&&(a.set(t,l),l+=t.length);o=new Blob([a.buffer],{type:c||void 0})}else o=new Blob;else o=yield r.blob();return{blob:o}});return function(t){return e.apply(this,arguments)}}()}}}}]);
//# sourceMappingURL=6558-es2015.c7090dd1054a329cf310.js.map