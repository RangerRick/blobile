"use strict";(self.webpackChunkblobile=self.webpackChunkblobile||[]).push([[1690],{51690:function(e,n,r){r.r(n),r.d(n,{EventSource:function(){return i},EventSourceWeb:function(){return u}});var o=r(19369),t=r(41899),s=(()=>{return(e=s||(s={}))[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSED=2]="CLOSED",s;var e})();class u extends t.Uw{constructor(){super({name:"EventSource",platforms:["web"]}),this.opened=!1}configure(e){var n=this;return(0,o.Z)(function*(){if(console.debug(`EventSourceWeb.configure(${e.url})`),!e.url)throw new Error("url is required");n.url=e.url})()}open(){var e=this;return(0,o.Z)(function*(){if(console.debug("EventSourceWeb.open()"),!e.url)throw new Error("You must call configure first!");e.notifyListeners("readyStateChanged",{state:s.CONNECTING}),e.eventSource=new window.EventSource(e.url),e.eventSource.onopen=e.onOpen.bind(e),e.eventSource.onmessage=e.onMessage.bind(e),e.eventSource.onerror=e.onError.bind(e)})()}onError(e){this.notifyListeners("error",{error:null==e?void 0:e.message})}onMessage(e){this.opened&&this.notifyListeners("message",{message:null==e?void 0:e.data})}onOpen(e){this.opened=!0,this.notifyListeners("open",{message:null==e?void 0:e.message}),this.notifyListeners("readyStateChanged",{state:s.OPEN})}close(){var e=this;return(0,o.Z)(function*(){console.debug("EventSourceWeb.close()"),e.opened=!1,e.eventSource&&(e.eventSource.close(),e.eventSource.onopen=null,e.eventSource.onmessage=null,e.eventSource.onerror=null,e.eventSource=null,e.notifyListeners("readyStateChanged",{state:s.CLOSED}))})()}}const i=new u;(0,t.fK)(i)}}]);
//# sourceMappingURL=1690-es2015.702a0d614a7c41468446.js.map