(self.webpackChunkblobile=self.webpackChunkblobile||[]).push([[9609],{49609:function(e,n,t){"use strict";t.r(n),t.d(n,{EventSource:function(){return i},EventSourceWeb:function(){return r}});var s=t(68384),o=(()=>(function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSED=2]="CLOSED"}(o||(o={})),o))();class r extends s.Uw{constructor(){super({name:"EventSource",platforms:["web"]}),this.opened=!1}async configure(e){if(console.debug(`EventSourceWeb.configure(${e.url})`),!e.url)throw new Error("url is required");this.url=e.url}async open(){if(console.debug("EventSourceWeb.open()"),!this.url)throw new Error("You must call configure first!");this.notifyListeners("readyStateChanged",{state:o.CONNECTING}),this.eventSource=new window.EventSource(this.url),this.eventSource.onopen=this.onOpen.bind(this),this.eventSource.onmessage=this.onMessage.bind(this),this.eventSource.onerror=this.onError.bind(this)}onError(e){this.notifyListeners("error",{error:null==e?void 0:e.message})}onMessage(e){this.opened&&this.notifyListeners("message",{message:null==e?void 0:e.data})}onOpen(e){this.opened=!0,this.notifyListeners("open",{message:null==e?void 0:e.message}),this.notifyListeners("readyStateChanged",{state:o.OPEN})}async close(){console.debug("EventSourceWeb.close()"),this.opened=!1,this.eventSource&&(this.eventSource.close(),this.eventSource.onopen=null,this.eventSource.onmessage=null,this.eventSource.onerror=null,this.eventSource=null,this.notifyListeners("readyStateChanged",{state:o.CLOSED}))}}const i=new r;(0,s.fK)(i)}}]);
//# sourceMappingURL=9609-es2015.737f77bd6fbc13f0b5af.js.map