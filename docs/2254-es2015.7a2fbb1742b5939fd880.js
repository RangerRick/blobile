"use strict";(self.webpackChunkblobile=self.webpackChunkblobile||[]).push([[2254],{82254:function(n,i,e){e.r(i),e.d(i,{StandingsPageModule:function(){return x}});var o=e(95861),s=e(54364),t=e(90335),r=e(31289),a=e(3786),d=e(54709),l=e(29543),c=e(60535),g=e(57711),m=e(90195),u=e(64106),f=e(30748),p=e(1095);function h(n,i){1&n&&(u.TgZ(0,"ion-button"),u._UZ(1,"ion-spinner"),u.qZA())}function Z(n,i){if(1&n){const n=u.EpF();u.TgZ(0,"ion-row",18),u.NdJ("click",function(){const i=u.CHM(n).$implicit;return u.oxw(3).openTeam(i.id)}),u.TgZ(1,"ion-col",19),u._uU(2),u.qZA(),u.TgZ(3,"ion-col",20),u._uU(4),u.qZA(),u.TgZ(5,"ion-col",21),u._uU(6),u.qZA(),u.qZA()}if(2&n){const n=i.$implicit;u.Akn("background-color: "+n.mainColor+"; color: "+n.mainTextColor),u.xp6(2),u.hij(" ",n.name," "),u.xp6(2),u.hij(" ",n.wins," "),u.xp6(2),u.AsE(" ",n.nonLosses,"-",n.losses," ")}}function T(n,i){if(1&n&&(u.TgZ(0,"ion-card",9),u.TgZ(1,"ion-card-header",10),u.TgZ(2,"ion-card-subtitle"),u._uU(3),u.qZA(),u.qZA(),u.TgZ(4,"ion-card-content",11),u.TgZ(5,"ion-grid",12),u.TgZ(6,"ion-row",13),u.TgZ(7,"ion-col",14),u._uU(8," Teams "),u.qZA(),u.TgZ(9,"ion-col",15),u._uU(10," Wins "),u.qZA(),u.TgZ(11,"ion-col",16),u._uU(12," Record "),u.qZA(),u.qZA(),u.YNc(13,Z,7,6,"ion-row",17),u.qZA(),u.qZA(),u.qZA()),2&n){const n=i.$implicit,e=u.oxw(2);u.xp6(3),u.Oqu(n.name),u.xp6(10),u.Q6J("ngForOf",n.teams)("ngForTrackBy",e.id)}}function b(n,i){if(1&n&&(u.TgZ(0,"ion-col",6),u.TgZ(1,"ion-header",7),u.TgZ(2,"h4"),u._uU(3),u.qZA(),u.qZA(),u.YNc(4,T,14,3,"ion-card",8),u.qZA()),2&n){const n=i.$implicit,e=u.oxw();u.xp6(3),u.Oqu(n.name),u.xp6(1),u.Q6J("ngForOf",n.divisions)("ngForTrackBy",e.id)}}const w=[{path:"",component:(()=>{class n{constructor(n,i,e,o){this.database=n,this.modalController=i,this.platform=e,this.stream=o,this.loading=!0,this.leagues=new c.M({}),this.standings=new l.U({}),this.tiebreakers=new g.w({}),this.data={subleagues:[]}}ngOnInit(){return(0,a.mG)(this,void 0,void 0,function*(){yield this.platform.ready(),this.stream.subscribe(n=>(0,a.mG)(this,void 0,void 0,function*(){n instanceof d.m&&(this.leagues=n.leagues,this.standings=n.games.standings),this.postprocess()}))})}openTeam(n){return(0,a.mG)(this,void 0,void 0,function*(){return console.debug(`opening team: ${n}`),yield(yield this.modalController.create({component:m.u,componentProps:{id:n}})).present()})}postprocess(){var n,i,e;return(0,a.mG)(this,void 0,void 0,function*(){const o=null===(n=this.leagues)||void 0===n?void 0:n.leagues[0];if(!o)return;this.data.name=o.name;const s=(n,i)=>{let e=this.standings.wins[i.id]-this.standings.wins[n.id];return 0===e&&(e=this.tiebreakers.order.indexOf(n.id)-this.tiebreakers.order.indexOf(i.id)),e},t=this.standings.records;this.tiebreakers=this.leagues.tiebreakers.find(n=>n.id===o.tiebreakers);const r=yield this.database.teams(),a=null===(e=null===(i=this.leagues)||void 0===i?void 0:i.subleagues)||void 0===e?void 0:e.filter(n=>o.subleagues.indexOf(n.id)>=0);this.data.subleagues=a.map(n=>{var i,e;const o={id:n.id,name:n.name},a=[],d=null===(e=null===(i=this.leagues)||void 0===i?void 0:i.divisions)||void 0===e?void 0:e.filter(i=>n.divisions.indexOf(i.id)>=0);return o.divisions=d.sort((n,i)=>n.name<i.name?-1:n.name>i.name?1:0).map(n=>{const i={id:n.id,name:n.name};return i.teams=n.teams.map(n=>r.find(i=>n===i.id)).sort(s).map(n=>{const i=t[n.id],e={id:n.id,name:n.fullName,emoji:n.emoji,emojiColor:n.emojiColor,mainColor:n.mainColor,secondaryColor:n.secondaryColor,mainTextColor:n.contrastingMainColor,secondaryTextColor:n.contrastingSecondaryColor,wins:i.wins,losses:i.losses,nonLosses:i.nonLosses,playoffs:!1};return a.push(e),e}),i}),a.sort((n,i)=>{let e=i.wins-n.wins;return 0===e&&(e=this.tiebreakers.order.indexOf(n.id)-this.tiebreakers.order.indexOf(i.id)),e}).filter((n,i)=>i<4).map(n=>{n.playoffs=!0}),o}),this.loading=!1})}id(n){return n&&n.id?n.id:n}}return n.\u0275fac=function(i){return new(i||n)(u.Y36(f.k),u.Y36(o.IN),u.Y36(o.t4),u.Y36(p.H))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-standings"]],decls:10,vars:4,consts:[[3,"translucent"],["color","primary"],["slot","secondary"],[4,"ngIf"],[1,"ion-no-margin"],["size","6","size-xs","12","size-sm","12","size-md","6","size-lg","6","size-xl","6",4,"ngFor","ngForOf","ngForTrackBy"],["size","6","size-xs","12","size-sm","12","size-md","6","size-lg","6","size-xl","6"],[1,"ion-no-border","ion-text-center"],["class","ion-no-padding ion-no-margin ion-margin-vertical",4,"ngFor","ngForOf","ngForTrackBy"],[1,"ion-no-padding","ion-no-margin","ion-margin-vertical"],[1,"division-header"],[1,"ion-no-padding"],[2,"width","100%"],["lines","none",1,"header-row"],["size","7",1,"team-name","header"],["size","2",1,"team-wins","header"],["size","3",1,"team-record","header"],["lines","none","class","team-row",3,"style","click",4,"ngFor","ngForOf","ngForTrackBy"],["lines","none",1,"team-row",3,"click"],["size","7",1,"team-name"],["size","2",1,"team-wins"],["size","3",1,"team-record"]],template:function(n,i){1&n&&(u.TgZ(0,"ion-header",0),u.TgZ(1,"ion-toolbar",1),u.TgZ(2,"ion-title"),u._uU(3," Standings "),u.qZA(),u.TgZ(4,"ion-buttons",2),u.YNc(5,h,2,0,"ion-button",3),u.qZA(),u.qZA(),u.qZA(),u.TgZ(6,"ion-content",4),u.TgZ(7,"ion-grid"),u.TgZ(8,"ion-row"),u.YNc(9,b,5,3,"ion-col",5),u.qZA(),u.qZA(),u.qZA()),2&n&&(u.Q6J("translucent",!0),u.xp6(5),u.Q6J("ngIf",i.loading),u.xp6(4),u.Q6J("ngForOf",i.data.subleagues)("ngForTrackBy",i.id))},directives:[o.Gu,o.sr,o.wd,o.Sm,s.O5,o.W2,o.jY,o.Nd,s.sg,o.YG,o.PQ,o.wI,o.PM,o.Zi,o.tO,o.FN],styles:[".team-row[_ngcontent-%COMP%]{font-weight:bold}.team-wins[_ngcontent-%COMP%]{text-align:end;font-family:monospace;font-size:1rem}.team-record[_ngcontent-%COMP%]{text-align:end;font-family:monospace;font-size:1rem}.division-header[_ngcontent-%COMP%]{padding-bottom:.5rem}.division-header[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{color:#000;font-size:larger}.header[_ngcontent-%COMP%]{font-size:smaller;font-family:inherit!important;color:#000}"]}),n})()}];let v=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[r.Bz.forChild(w)],r.Bz]}),n})(),x=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[o.Pc,s.ez,t.u5,v]]}),n})()}}]);
//# sourceMappingURL=2254-es2015.7a2fbb1742b5939fd880.js.map